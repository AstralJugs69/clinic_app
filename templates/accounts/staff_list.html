{% extends "base.html" %}
{% block content %}

<div class="max-w-6xl mx-auto px-4 py-8">
    <div class="flex flex-col md:flex-row md:items-center justify-between mb-8">
        <div>
            <h1 class="text-2xl font-bold text-gray-800">Staff Directory</h1>
            <p class="text-gray-500 mt-1">Manage and view clinic staff members</p>
        </div>

        <!-- Role Filter -->
        <div class="mt-4 md:mt-0">
            <form method="get" class="flex gap-2">
                <select name="role" class="border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm"
                    onchange="this.form.submit()">
                    <option value="">All Roles</option>
                    {% for value, label in role_choices %}
                    <option value="{{ value }}" {% if current_role == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for profile in profiles %}
        <div
            class="bg-white shadow rounded-lg p-6 flex items-start space-x-4 border border-gray-100 hover:shadow-md transition">
            <div class="flex-shrink-0">
                <div
                    class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-lg font-bold text-gray-600">
                    {{ profile.avatar_initials }}
                </div>
            </div>
            <div class="flex-1 min-w-0">
                <h3 class="text-lg font-medium text-gray-900 truncate">
                    {{ profile.user.get_full_name|default:profile.user.username }}
                </h3>
                <p class="text-sm text-blue-600 font-medium mb-1 capitalize">{{ profile.get_role_display }}</p>

                <div class="space-y-1 mt-2 text-sm text-gray-500">
                    {% if profile.department %}
                    <div class="flex items-center gap-2">
                        <span>üè¢</span> {{ profile.department }}
                    </div>
                    {% endif %}
                    {% if profile.phone %}
                    <div class="flex items-center gap-2">
                        <span>üìû</span> {{ profile.phone }}
                    </div>
                    {% endif %}
                    {% if profile.user.email %}
                    <div class="flex items-center gap-2">
                        <span>‚úâÔ∏è</span> <a href="mailto:{{ profile.user.email }}" class="hover:text-blue-600">{{
                            profile.user.email }}</a>
                    </div>
                    {% endif %}
                </div>

                <div class="mt-3 text-xs text-gray-400">
                    Joined {{ profile.user.date_joined|date:"M Y" }}
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-span-full text-center py-12 bg-white rounded-lg border border-dashed border-gray-300">
            <div class="text-gray-400 text-5xl mb-3">üë•</div>
            <p class="text-gray-500 font-medium">No staff members found.</p>
            <p class="text-gray-400 text-sm">Try adjusting the filters.</p>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}